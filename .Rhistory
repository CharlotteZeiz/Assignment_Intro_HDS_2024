#Q-Q-plot
mortality_scot_by_council %>%
ggplot(aes(sample = mortality_rate))+
geom_qq()+
geom_qq_line()
#data is skewed --> IQR instead of sd
#IQR values per year
IQR_data <- mortality_scot_by_council %>%
group_by(year) %>%
summarise(
Q1 = quantile(mortality_rate, 0.25, na.rm = TRUE),
Q3 = quantile(mortality_rate, 0.75, na.rm = TRUE),
IQR = Q3 - Q1)
#2019 upper outliners by name
mortality_out_2019 <- mortality_scot_by_council %>%
select(area_name, year, mortality_rate) %>%
filter(year == "2019")
#Q3
Q3 <- quantile(mortality_out_2019$mortality_rate, 0.75)
#upper whisker
upper_whisker <- Q3 + 1.5 * IQR
#data for boxplot
mortality_scot_by_council <- mortality_allgeo %>%
select(`area_type`,
`area_name`,
`year`,
`mortality_rate`) %>%
filter(`area_type` == "Council area",
`year` %in% c("2004", "2007", "2010", "2013", "2016", "2019")) #every 3 years
mortality_scot_by_council$year <- as.factor(mortality_scot_by_council$year) #to help separate boxplots per year in one graph
#check if data is normal distrusted or skewed
#Histogram
mortality_scot_by_council %>%
ggplot(aes(x = mortality_rate))+
geom_histogram()
#Q-Q-plot
mortality_scot_by_council %>%
ggplot(aes(sample = mortality_rate))+
geom_qq()+
geom_qq_line()
#data is skewed --> IQR instead of sd
#IQR values per year
IQR_data <- mortality_scot_by_council %>%
group_by(year) %>%
summarise(
Q1 = quantile(mortality_rate, 0.25, na.rm = TRUE),
Q3 = quantile(mortality_rate, 0.75, na.rm = TRUE),
IQR = Q3 - Q1)
#2019 upper outliners by name
mortality_out_2019 <- mortality_scot_by_council %>%
select(area_name, year, mortality_rate) %>%
filter(year == "2019")
#Q3
Q1 <- quantile(mortality_out_2019$mortality_rate, 0.25)
Q3 <- quantile(mortality_out_2019$mortality_rate, 0.75)
IQR <- Q3 - Q1
#upper whisker
upper_whisker <- Q3 + 1.5 * IQR
#data for boxplot
mortality_scot_by_council <- mortality_allgeo %>%
select(`area_type`,
`area_name`,
`year`,
`mortality_rate`) %>%
filter(`area_type` == "Council area",
`year` %in% c("2004", "2007", "2010", "2013", "2016", "2019")) #every 3 years
mortality_scot_by_council$year <- as.factor(mortality_scot_by_council$year) #to help separate boxplots per year in one graph
#check if data is normal distrusted or skewed
#Histogram
mortality_scot_by_council %>%
ggplot(aes(x = mortality_rate))+
geom_histogram()
#Q-Q-plot
mortality_scot_by_council %>%
ggplot(aes(sample = mortality_rate))+
geom_qq()+
geom_qq_line()
#data is skewed --> IQR instead of sd
#IQR values per year
IQR_data <- mortality_scot_by_council %>%
group_by(year) %>%
summarise(
Q1 = quantile(mortality_rate, 0.25, na.rm = TRUE),
Q3 = quantile(mortality_rate, 0.75, na.rm = TRUE),
IQR = Q3 - Q1)
#2019 upper outliers by name
mortality_out_2019 <- mortality_scot_by_council %>%
select(area_name, year, mortality_rate) %>%
filter(year == "2019")
#Q3
Q1 <- quantile(mortality_out_2019$mortality_rate, 0.25)
Q3 <- quantile(mortality_out_2019$mortality_rate, 0.75)
IQR <- Q3 - Q1
#upper whisker
upper_whisker <- Q3 + 1.5 * IQR
#high outliers 2019
up_outliers <- mortality_out_2019 %>%
filter(mortality_rate > upper_whisker)
View(up_outliers)
#data for boxplot
mortality_scot_by_council <- mortality_allgeo %>%
select(`area_type`,
`area_name`,
`year`,
`mortality_rate`) %>%
filter(`area_type` == "Council area",
`year` %in% c("2004", "2007", "2010", "2013", "2016", "2019")) #every 3 years
mortality_scot_by_council$year <- as.factor(mortality_scot_by_council$year) #to help separate boxplots per year in one graph
#check if data is normal distrusted or skewed
#Histogram
mortality_scot_by_council %>%
ggplot(aes(x = mortality_rate))+
geom_histogram()
#Q-Q-plot
mortality_scot_by_council %>%
ggplot(aes(sample = mortality_rate))+
geom_qq()+
geom_qq_line()
#data is skewed --> IQR instead of sd
#IQR values per year
IQR_data <- mortality_scot_by_council %>%
group_by(year) %>%
summarise(
Q1 = quantile(mortality_rate, 0.25, na.rm = TRUE),
Q3 = quantile(mortality_rate, 0.75, na.rm = TRUE),
IQR = Q3 - Q1)
#2019 upper outliers by name
mortality_out_2019 <- mortality_scot_by_council %>%
select(area_name, year, mortality_rate) %>%
filter(year == "2019")
#Q3
Q1 <- quantile(mortality_out_2019$mortality_rate, 0.25)
Q3 <- quantile(mortality_out_2019$mortality_rate, 0.75)
IQR <- Q3 - Q1
#upper whisker
upper_whisker <- Q3 + 1.5 * IQR
# 4th Q
Q4_2019 <- mortality_out_2019 %>%
filter(mortality_rate > Q3)
#high outliers 2019
up_outliers <- mortality_out_2019 %>%
filter(mortality_rate > upper_whisker)
View(Q4_2019)
View(infant_death_all_geo)
#boxplot
library(ggplot2)
p2 <- mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(up_outliers)
#boxplot
library(ggplot2)
p2 <- mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(aes(data= up_outliers, x = year, y = mortality_rate))
p3 <- IQR_data %>%
ggplot()+
geom_point(aes(x = year, y = IQR))+
scale_y_continuous(limits = c(0.5, 2))
library(patchwork)
p2/p3 +
plot_layout(heights = c(5, 2))
#boxplot
library(ggplot2)
mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(aes(data= up_outliers, x = year, y = mortality_rate))
#boxplot
library(ggplot2)
mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(data= up_outliers,aes(x = year, y = mortality_rate))
#boxplot
library(ggplot2)
mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(data= up_outliers,aes(x = year, y = mortality_rate, label = area_name))
IQR_data %>%
ggplot()+
geom_point(aes(x = year, y = IQR))+
scale_y_continuous(limits = c(0.5, 2))
#boxplot
library(ggplot2)
mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(data= up_outliers,aes(x = year, y = mortality_rate, label = area_name),
color = "black",
size = 3,
vjust = -0.5)
IQR_data %>%
ggplot()+
geom_point(aes(x = year, y = IQR))+
scale_y_continuous(limits = c(0.5, 2))
#boxplot
library(ggplot2)
p2 <- mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(data= up_outliers,aes(x = year, y = mortality_rate, label = area_name),
color = "black",
size = 3,
vjust = -0.5)
p3 <- IQR_data %>%
ggplot()+
geom_point(aes(x = year, y = IQR))+
scale_y_continuous(limits = c(0.5, 2))
library(patchwork)
p2/p3 + plot_layout(heights = 5,2)
#boxplot
library(ggplot2)
p2 <- mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(data= up_outliers,aes(x = year, y = mortality_rate, label = area_name),
color = "black",
size = 3,
vjust = -0.5)
p3 <- IQR_data %>%
ggplot()+
geom_point(aes(x = year, y = IQR))+
scale_y_continuous(limits = c(0.5, 2))
library(patchwork)
p2/p3 + plot_layout(heights = c(5,2))
View(Q4_2019)
View(IQR_data)
View(mortality_allgeo)
View(mortality_out_2019)
View(mortality_allgeo)
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name == %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(%in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name == %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y= mortality_rate, colour = area_name))
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y= mortality_rate, colour = area_name), linewidth = 1)
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y= mortality_rate, colour = area_name), linewidth = 1)+
scale_linetype_manual(values = c("NHS Tayside" = "dotted")
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y= mortality_rate, colour = area_name), linewidth = 1)+
scale_linetype_manual(values = c("NHS Tayside" = "dotted",
"Dundee City" = "solid",
"Perth & Kinross" = "solid",
"Angus" = "solid")) +
labs(x = "Year", y = "Infant Mortality Rate", title = "NHS Tayside")
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y= mortality_rate, colour = area_name), linewidth = 1)+
scale_linetype_manual(values = "NHS Tayside" = "dotted") +
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y= mortality_rate, colour = area_name, linetype = area_name), linewidth = 1)+
scale_linetype_manual(values = "NHS Tayside" = "dotted",
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y= mortality_rate, colour = area_name), linewidth = 1, linetype = area_name)+
scale_linetype_manual(values = "NHS Tayside" = "dotted",
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y = mortality_rate, colour = area_name), linewidth = 1, linetype = area_name)+
scale_linetype_manual(values = "NHS Tayside" = "dotted") +
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y = mortality_rate, colour = area_name), linewidth = 1, linetype = area_name)+
scale_linetype_manual(values = c("NHS Tayside" = "dotted")) +
labs(x = "Year", y = "Infant Mortality Rate", title = "NHS Tayside")
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y = mortality_rate, colour = area_name, linetype = area_name), linewidth = 1)+
scale_linetype_manual(values = c("NHS Tayside" = "dotted")) +
labs(x = "Year", y = "Infant Mortality Rate", title = "NHS Tayside")
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y = mortality_rate, colour = area_name, linetype = area_name), linewidth = 1)+
scale_linetype_manual(values = c("NHS Tayside" = "dotted",
"Dundee City" = "solid",
"Perth & Kinross" = "solid",
"Angus" = "solid")) +
labs(x = "Year", y = "Infant Mortality Rate", title = "NHS Tayside")
library(ggplot2)
mortality_allgeo %>%
select(area_name, year, mortality_rate) %>%
filter(area_name %in% c("NHS Tayside", "Dundee City", "Perth & Kinross", "Angus")) %>%
ggplot()+
geom_line(aes(x = year, y = mortality_rate, colour = area_name, linetype = area_name), linewidth = 1)+
scale_linetype_manual(values = c("NHS Tayside" = "dotted",
"Dundee City" = "solid",
"Perth & Kinross" = "solid",
"Angus" = "solid")) +
labs(x = "Year", y = "Infant Mortality Rate", title = "NHS Tayside")+
theme_bw()+
theme(legend.title = element_blank())
#boxplot
library(ggplot2)
p2 <- mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(data= up_outliers,aes(x = year, y = mortality_rate, label = area_name),
color = "black",
size = 3,
vjust = -0.5)
p3 <- IQR_data %>%
ggplot()+
geom_point(aes(x = year, y = IQR))+
scale_y_continuous(limits = c(0.5, 2))
library(patchwork)
p2/p3 +
plot_layout(heights = c(5,2))+
theme_bw()
#boxplot
library(ggplot2)
p2 <- mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(data= up_outliers,aes(x = year, y = mortality_rate, label = area_name),
color = "black",
size = 3,
vjust = -0.5)+
theme_bw()
p3 <- IQR_data %>%
ggplot()+
geom_point(aes(x = year, y = IQR))+
scale_y_continuous(limits = c(0.5, 2))+
theme_bw()
library(patchwork)
p2/p3 +
plot_layout(heights = c(5,2))
#boxplot
library(ggplot2)
p2 <- mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(data= up_outliers,aes(x = year, y = mortality_rate, label = area_name),
color = "black",
size = 3,
vjust = -0.5)+
theme_bw()+
theme(legend.position = "none")
p3 <- IQR_data %>%
ggplot()+
geom_point(aes(x = year, y = IQR))+
scale_y_continuous(limits = c(0.5, 2))+
theme_bw()
library(patchwork)
p2/p3 +
plot_layout(heights = c(5,2))
#boxplot
library(ggplot2)
p2 <- mortality_scot_by_council %>%
ggplot(aes(x = factor(year),
y = mortality_rate,
colour = year)) +
geom_boxplot() +
geom_jitter(alpha = 0.6) +
theme(legend.position = "none")+
labs(x = "Year",
y = "Infant mortality rate",
title = "Infant mortality rate in Scotland by council areas (2004-2019)")+
scale_y_continuous(limits = c(-0.5, 12))+
geom_text(data= up_outliers,aes(x = year, y = mortality_rate, label = area_name),
color = "black",
size = 3,
vjust = -0.5)+
theme_bw()+
theme(legend.position = "none")
p3 <- IQR_data %>%
ggplot()+
geom_point(aes(x = year, y = IQR))+
scale_y_continuous(limits = c(0.5, 2))+
theme_bw()
library(patchwork)
p2/p3 +
plot_layout(heights = c(5,2))
